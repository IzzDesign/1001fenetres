<script>
  $(document).ready(function() {
    $("#mailsent").hide();

    $('#form-retry').click(function(e) {
      $("#mailsent").hide();
      $("#form").show();
    });

    $("#form").submit(function (e) {
      e.preventDefault(); // avoid to execute the actual submit of the form.

      $("#form").hide();      

      var form = $(this);
      var url = form.attr('action');

      $.ajax({
        type: "POST",
        url: url,
        crossDomain: true,
        data: form.serialize(), // serializes the form's elements.
        success: function (data) {
          console.log('Form success', data);
          $("#mailsent").show(200);
          $("#mailsent .success").show(200);
          $("#mailsent .error").hide(200);
        },
        error: function (xhr, status, c) {
          console.log(xhr.responseText);
          console.log('Form error', xhr, '####', status, '####', c);
          $("#mailsent").show(200);
          $("#mailsent .success").hide(200);
          $("#mailsent .error").show(200);
        }
      });
    });
  });
</script>